<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>리턴워크페이스 로그인</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/apple-touch-icon.png">
    <link rel="icon" type="image/ico" sizes="32x32" href="/assets/image/favicon.ico">
    <link rel="icon" type="image/ico" sizes="16x16" href="/assets/image/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>
<body class="bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 min-h-screen flex items-center justify-center px-4">

  <div class="bg-white p-8 sm:p-10 rounded-3xl shadow-xl w-full max-w-md text-center border border-gray-200">
    <div class="flex flex-col items-center mb-8 sm:mb-10">
      <h1 class="text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight mb-2">리턴워크페이스 로그인</h1>
      <p class="text-gray-500 text-sm sm:text-base">계속하려면 디스코드 계정으로 로그인하세요.</p>
    </div>

    <button id="loginBtn" 
      class="w-full flex items-center justify-center gap-3 bg-black text-white font-medium py-3 sm:py-4 rounded-xl transition-all duration-300 hover:bg-gray-800 shadow-sm hover:shadow-md text-sm sm:text-base">
      <img src="https://cdn-icons-png.flaticon.com/512/5968/5968756.png" 
           alt="Discord Logo" 
           class="w-5 sm:w-6 h-5 sm:h-6 invert brightness-0">
      Discord로 로그인하기
    </button>

    <p class="text-xs sm:text-sm text-gray-400 mt-6 sm:mt-10 leading-relaxed">
      Copyright © 2024–2025 LUXERET. All Rights Reserved.<br>
      본 사이트의 콘텐츠는 저작권법의 보호를 받으며,<br>
      무단 전재·복사·배포를 금합니다.
    </p>
  </div>

  <script>
(function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();

ChannelIO('boot', {
  "pluginKey": "9825c9e9-131f-40b6-a0f2-0cc6dce71f3c"
});
</script>

  <script>
    const API_BASE = "https://backend.luxeret.com/api";

    document.getElementById('loginBtn').addEventListener('click', async () => {
      try {
        const res = await fetch(`${API_BASE}/auth/login`);
        const data = await res.json();

        const loginUrl = new URL(data.auth_url);
        loginUrl.searchParams.set('state', 'https://returns.luxeret.com/workspace/order-check');
        window.location.href = loginUrl.toString();
      } catch (err) {
        console.error(err);
        alert('로그인 URL 생성 실패!');
      }
    });
  </script>
</body>
</html>
